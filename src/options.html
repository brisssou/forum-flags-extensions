<html>
<head>
<title>HFR - Mes Sujets - Options</title>
<link rel="StyleSheet" href="style.css" type="text/css"/>
<script src="prefs.js"></script>
<script src="web.js"></script>
<script src="behaviour.js"></script>
<script type="text/javascript">

function setVisible(element, isVisible) {
  if (isVisible) {
    element.style.display = 'block';
  } else {
    element.style.display = 'none';
  }
}

// Restores select box state to saved value from localStorage.
function initControls() {
  var refTimeInput = document.getElementById("REFRESH_TIME_PREF");
  refTimeInput.value = getPref(REFRESH_TIME_PREF);
  refTimeInput.onchange = function(event) {
    var refTime = parseInt(this.value);
    if (isNaN(refTime)) {
      document.getElementById("REFRESH_TIME_PREF.error").innerHtml = "des entiers seulement, merci!";
    } else {
      setPref(REFRESH_TIME_PREF, refTime);
    }
    chrome.extension.getBackgroundPage().startRequest();
  };
  refTimeInput.onkeyup=refTimeInput.onchange;
  
  var directLinkInput = document.getElementById('USE_DIRECT_LINK_PREF');
  directLinkInput.checked = getPref(USE_DIRECT_LINK_PREF);
  directLinkInput.onchange = function (event) {
    setPref(USE_DIRECT_LINK_PREF, this.value);
    initBehaviour();
  };
  
  var onlyFavsInput = document.getElementById('ONLY_FAVS_PREF');
  onlyFavsInput.checked = getPref(ONLY_FAVS_PREF);
  onlyFavsInput.onchange = function (event) {
    setPref(ONLY_FAVS_PREF, this.value);
    initBrowserActionTitle();
  };
  
  var aniIconInput = document.getElementById('ANIMATED_ICON_PREF');
  aniIconInput.checked = getPref(ANIMATED_ICON_PREF);
  aniIconInput.onchange = function (event) {
    setPref(ANIMATED_ICON_PREF, this.value);
  };
  
  var contextMenuInput = document.getElementById('USE_CONTEXT_MENU_PREF');
  contextMenuInput.checked = getPref(USE_CONTEXT_MENU_PREF);
  contextMenuInput.onchange = function (event) {
    setPref(USE_CONTEXT_MENU_PREF, this.value);
    initBehaviour();
  };
  
  
}
</script>
</head>
<body onload="initControls()">
  <div id="prefs">
    <div>
      <span><label for="REFRESH_TIME_PREF">Temps de rafra&icirc;chissement  en secondes :</label></span>
      <span><input type="text" name="REFRESH_TIME_PREF" id="REFRESH_TIME_PREF"/></span>
      <div id="REFRESH_TIME_PREF.error" class="error"></div>
    </div>
    <div>
      <span><label for="ONLY_FAVS_PREF" title="Si d&eacute;coch&eacute;, rafra&icirc;chit les drapeaux cyans.">Rafra&icirc;chir uniquement les favoris :</label></span>
      <span><input type="checkbox" name="ONLY_FAVS_PREF" id="ONLY_FAVS_PREF"/></span>
    </div>
    <div>
      <span><label for="USE_DIRECT_LINK_PREF" title="Si d&eacute;coch&eacute;, affichage de la popup.">Le click sur l'ic&ocirc;ne envoie directement sur la page des favoris :</label></span>
      <span><input type="checkbox" name="USE_DIRECT_LINK_PREF" id="USE_DIRECT_LINK_PREF"/></span>
    </div>
    <div>
      <span><label for="USE_CONTEXT_MENU_PREF" title="Le menu appra&icirc;t au click droit sur une page.">Utiliser le menu contextuel pour rafra&icirc;chir :</label></span>
      <span><input type="checkbox" name="USE_CONTEXT_MENU_PREF" id="USE_CONTEXT_MENU_PREF"/></span>
    </div>
    <div>
      <span><label for="ANIMATED_ICON_PREF">Animer l'icone de l'extension si il y a des topics non lus :</label></span>
      <span><input type="checkbox" name="ANIMATED_ICON_PREF" id="ANIMATED_ICON_PREF"/></span>
    </div>
  </div>
</body>
</html>
