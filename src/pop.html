<html>
<head>
<link rel="StyleSheet" href="style.css" type="text/css"/>
<script src="web.js"></script>
<script src="prefs.js"></script>
<script src="behaviour.js"></script>
<script type="text/javascript">
  function initPopup() {
    var innerHtml = "";
    var entry;
    var popupContent = chrome.extension.getBackgroundPage().popupContent;
    innerHtml += "<ul>";
    for (var i = 0; i < popupContent.entries.length; i++) {
      entry = popupContent.entries[i];
      innerHtml += "<li><a href=\"javascript:goToPage('";
      innerHtml += getFullUrl(entry.href);
      innerHtml += "')\">";
      innerHtml += entry.title;
      innerHtml += "</a></li>";
    }
    innerHtml += "</ul>";
    document.getElementById('entries').innerHTML = innerHtml;
  }

  function htmlDecode(input){
    var e = document.createElement('div');
    e.innerHTML = input;
    return e.childNodes[0].nodeValue;
  }
  
  function openAll() {
    var popupContent = chrome.extension.getBackgroundPage().popupContent;
    var entry;
    for (var i = 0; i < popupContent.entries.length; i++) {
      entry = popupContent.entries[i];
      goToPage(getFullUrl(htmlDecode(entry.href)));
    }
  }
</script>
</head>
<body onload="initPopup()">
<div id="popup">
  <ul id="headBar">
    <li class="right"><a href="javascript:goToHfr();chrome.extension.getBackgroundPage().startRequest()">HFR</a></li>
    <li class="right"><a href="javascript:chrome.extension.getBackgroundPage().startRequest()">Rafra&icirc;chir</a></li>
    <li class="right"><a href="javascript:openAll();chrome.extension.getBackgroundPage().startRequest()">Tout ouvrir</a></li>
    <li class="left"><a href="javascript:goToPage('options.html');">Options</a></li>
  </ul>
  <div id="entries">
  </div>
</div>
</body>
</html>

